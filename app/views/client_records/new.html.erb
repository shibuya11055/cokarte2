<%# filepath: app/views/client_records/new.html.erb %>
<div class="client-form-container">
  <h1>新規カルテ作成</h1>
  <div class="client-form-card">
    <%= form_with(model: @client_record, local: true) do |f| %>
      <table class="client-form-table">
        <tr>
          <th>顧客</th>
          <td>
            <select name="client_record[client_id]" id="client-select" class="client-select" required style="width:350px;max-width:100%;min-width:220px;"
                    data-controller="select2" data-select2-placeholder-value="選択してください" data-select2-width-value="100%">
              <option value="">選択してください</option>
              <% Client.all.each do |c| %>
                <option value="<%= c.id %>" <%= 'selected' if defined?(@client_record) && c.id == @client_record.client_id %>><%= c.last_name + c.first_name %></option>
              <% end %>
            </select>
          </td>
        </tr>
        <tr><th>来店日時</th><td><%= f.datetime_field :visited_at, required: true %></td></tr>
        <tr><th>金額</th><td><%= f.number_field :amount, min: 0 %></td></tr>
        <tr><th>ノート</th><td><%= f.text_area :note, rows: 3 %></td></tr>
      </table>
      <div class="client-form-actions">
        <%= f.submit '登録する', class: 'btn btn-detail' %>
        <%= link_to 'カルテ一覧へ戻る', client_records_path, class: 'btn' %>
      </div>
    <% end %>
  </div>
</div>

